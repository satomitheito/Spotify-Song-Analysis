<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.55">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Unsupervised Learning – DSAN-5000: Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/gu-logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">DSAN-5000: Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../report/report.html"> 
<span class="menu-text">Report</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-technical-details" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Technical details</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-technical-details">    
        <li>
    <a class="dropdown-item" href="../../technical-details/data-collection/main.html">
 <span class="dropdown-text">Data-collection</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/data-cleaning/main.html">
 <span class="dropdown-text">Data-cleaning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/eda/main.html">
 <span class="dropdown-text">Exploratory Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/unsupervised-learning/main.html">
 <span class="dropdown-text">Unsupervised Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/supervised-learning/main.html">
 <span class="dropdown-text">Supervised Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/progress-log.html">
 <span class="dropdown-text">Progress Log</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../technical-details/llm-usage-log.html">
 <span class="dropdown-text">LLM usage Log</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction-and-motivation" id="toc-introduction-and-motivation" class="nav-link active" data-scroll-target="#introduction-and-motivation">Introduction and Motivation</a></li>
  <li><a href="#overview-of-methods" id="toc-overview-of-methods" class="nav-link" data-scroll-target="#overview-of-methods">Overview of Methods</a></li>
  <li><a href="#code" id="toc-code" class="nav-link" data-scroll-target="#code">Code</a>
  <ul class="collapse">
  <li><a href="#dimensionality-reduction" id="toc-dimensionality-reduction" class="nav-link" data-scroll-target="#dimensionality-reduction">Dimensionality Reduction</a></li>
  </ul></li>
  <li><a href="#summary-and-interpretation-of-results" id="toc-summary-and-interpretation-of-results" class="nav-link" data-scroll-target="#summary-and-interpretation-of-results">Summary and Interpretation of Results</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Unsupervised Learning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction-and-motivation" class="level2">
<h2 class="anchored" data-anchor-id="introduction-and-motivation">Introduction and Motivation</h2>
<p>This page focuses on using unsupervised machine learning to learn more about the song data and identify what sets the top 20 songs apart from the other. The code is divided into two sections: dimensionality reduction and clustering. In dimensionality reduction, I want to simply high dimensional data while making sure I keep the relationships between the features. These methods allow for better visualizations that will help us find the structure in the dataset. Clustering will let me group songs based on common characteristics. This can be used to find what’s in common between the top performing songs or help users find songs that are a good match with their favorite top 10 or 20 song. Overall, the goal of this page is the find if specific trends or features are indicative of a song’s likelihood of success.</p>
</section>
<section id="overview-of-methods" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-methods">Overview of Methods</h2>
<p>Give a concise explanation of the methods used. For example, if using K-Means clustering, describe what it is, how it works, the inputs and outputs, and key hyperparameters.</p>
</section>
<section id="code" class="level2">
<h2 class="anchored" data-anchor-id="code">Code</h2>
<div id="cell-4" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.manifold <span class="im">import</span> TSNE</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans, DBSCAN, AgglomerativeClustering</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> silhouette_score</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="dimensionality-reduction" class="level3">
<h3 class="anchored" data-anchor-id="dimensionality-reduction">Dimensionality Reduction</h3>
<p>The objective of this section is to explore and demonstrate the effectiveness of PCA and t-SNE in reducing the dimensionality of complex data while preserving essential information and improving visualization.</p>
<p>For the dimension reduction algorithms, I wanted to alter the genres that I recorded. Previously, only the first genre was recorded. The following functioln records more general genre categories for each of the genres listed for the song. I will then apply one hot encoding to the lists of the simplified genres so I can use it in a clustering algorithm.</p>
<p>This code then applies the OHE to the data and removes the non numeric columns. This cleans the data so that we can then apply dimensionality reduction and clustering to the data.</p>
<div id="cell-8" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> map_genres_to_categories(genres):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define the mapping of specific genres to broader categories</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    genre_mapping <span class="op">=</span> {</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pop"</span>: [</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">"pop"</span>, <span class="st">"social media pop"</span>, <span class="st">"dance pop"</span>, <span class="st">"modern country pop"</span>, <span class="st">"gen z singer-songwriter"</span>, <span class="st">"colombian pop"</span>, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"modern indie pop"</span>, <span class="st">"power pop"</span>, <span class="st">"la pop"</span>, <span class="st">"singer-songwriter pop"</span>, <span class="st">"uk pop"</span>, <span class="st">"alt z"</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Indie/Alternative"</span>: [</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"indie pop"</span>, <span class="st">"modern alternative pop"</span>, <span class="st">"indie rock"</span>, <span class="st">"small room"</span>, <span class="st">"asheville indie"</span>, <span class="st">"sacramento indie"</span>, </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"twee pop"</span>, <span class="st">"tape club"</span>, <span class="st">"bubblegrunge"</span>, <span class="st">"bedroom pop"</span>, <span class="st">"slacker rock"</span>, <span class="st">"irish indie rock"</span>, <span class="st">"irish post-punk"</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Rock"</span>: [</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"album rock"</span>, <span class="st">"blues rock"</span>, <span class="st">"classic rock"</span>, <span class="st">"electric blues"</span>, <span class="st">"hard rock"</span>, <span class="st">"jam band"</span>, <span class="st">"southern rock"</span>, </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"heartland rock"</span>, <span class="st">"garage rock"</span>, <span class="st">"modern blues rock"</span>, <span class="st">"modern rock"</span>, <span class="st">"punk blues"</span>, <span class="st">"noise rock"</span>, <span class="st">"no wave"</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Country"</span>: [</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"classic texas country"</span>, <span class="st">"contemporary country"</span>, <span class="st">"country dawn"</span>, <span class="st">"country road"</span>, <span class="st">"countrygaze"</span>, </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"deep new americana"</span>, <span class="st">"roots americana"</span>, <span class="st">"classic oklahoma country"</span>, <span class="st">"red dirt"</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Hip Hop/Rap"</span>: [</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"hip hop"</span>, <span class="st">"rap"</span>, <span class="st">"west coast rap"</span>, <span class="st">"pop rap"</span>, <span class="st">"melodic rap"</span>, <span class="st">"houston rap"</span>, <span class="st">"atl hip hop"</span>, <span class="st">"trap"</span>, </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"trap queen"</span>, <span class="st">"viral rap"</span>, <span class="st">"southern hip hop"</span>, <span class="st">"dfw rap"</span>, <span class="st">"canadian hip hop"</span>, <span class="st">"indian underground rap"</span>, </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">"desi hip hop"</span>, <span class="st">"malayalam hip hop"</span>, <span class="st">"irish hip hop"</span>, <span class="st">"conscious hip hop"</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"R&amp;B"</span>: [</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">"r&amp;b"</span>, <span class="st">"alternative r&amp;b"</span>, <span class="st">"uk contemporary r&amp;b"</span>, <span class="st">"afro r&amp;b"</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Latin"</span>: [</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>            <span class="st">"reggaeton"</span>, <span class="st">"urbano latino"</span>, <span class="st">"trap latino"</span>, <span class="st">"reggaeton chileno"</span>, <span class="st">"reggaeton colombiano"</span>, <span class="st">"latin pop"</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Afrobeat/African"</span>: [</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">"afrobeats"</span>, <span class="st">"afropop"</span>, <span class="st">"azonto"</span>, <span class="st">"nigerian pop"</span>, <span class="st">"alte"</span>, <span class="st">"nigerian hip hop"</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Electronic/Experimental"</span>: [</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">"art pop"</span>, <span class="st">"metropopolis"</span>, <span class="st">"ambient folk"</span>, <span class="st">"freak folk"</span>, <span class="st">"hyperpop"</span>, <span class="st">"proto-hyperpop"</span>, <span class="st">"bubblegum bass"</span>, </span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>            <span class="st">"digital hardcore"</span>, <span class="st">"escape room"</span>, <span class="st">"experimental pop"</span>, <span class="st">"experimental hip hop"</span>, <span class="st">"deconstructed club"</span>, </span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">"electronica"</span>, <span class="st">"glitch"</span>, <span class="st">"glitch hop"</span>, <span class="st">"jazztronica"</span>, <span class="st">"intelligent dance music"</span>, <span class="st">"psychedelic hip hop"</span>, </span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>            <span class="st">"wonky"</span>, <span class="st">"indietronica"</span>, <span class="st">"afrofuturism"</span>, <span class="st">"transpop"</span>, <span class="st">"uk alternative pop"</span>, <span class="st">"crank wave"</span>, <span class="st">"jersey club"</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"K-pop"</span>: [</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>            <span class="st">"k-pop"</span>, <span class="st">"k-pop girl group"</span>, <span class="st">"anime"</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        ],</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Other"</span>: [</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>            <span class="st">"None Listed"</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    categories <span class="op">=</span> []</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> category, genre_list <span class="kw">in</span> genre_mapping.items():</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if any genre in the song's genre list belongs to this category</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">any</span>(genre <span class="kw">in</span> genres <span class="cf">for</span> genre <span class="kw">in</span> genre_list):</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>            categories.append(category)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> categories:  <span class="co"># If no genres match, return "Other"</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>        categories.append(<span class="st">"Other"</span>)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> categories</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>songs <span class="op">=</span> pd.read_csv(<span class="st">'../../data/processed-data/transformed_data.csv'</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>songs_num <span class="op">=</span> songs[[<span class="st">'Genres'</span>, <span class="st">'Song Popularity'</span> ,<span class="st">'Popularity'</span>, <span class="st">'Explicit'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'Duration (ms)_transf'</span>, <span class="st">'Followers_transf'</span>, <span class="st">'Lyrics Word Count_transf'</span>, <span class="st">'neg'</span>, <span class="st">'neu'</span>, <span class="st">'pos'</span>, <span class="st">'compound'</span>, <span class="st">'Ranking Group'</span>, <span class="st">'Top 10 Song'</span>]]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>songs_num[<span class="st">'Simplified Genre'</span>] <span class="op">=</span> songs_num[<span class="st">'Genres'</span>].<span class="bu">apply</span>(map_genres_to_categories)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># One-Hot Encoding the 'Simplified Genre' column</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>songs_num <span class="op">=</span> songs_num.drop(columns<span class="op">=</span>[<span class="st">'Ranking Group'</span>, <span class="st">'Top 10 Song'</span>])</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>songs_num_encoded <span class="op">=</span> songs_num[<span class="st">'Simplified Genre'</span>].explode().<span class="bu">str</span>.get_dummies().groupby(level<span class="op">=</span><span class="dv">0</span>).<span class="bu">sum</span>()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Join the encoded genres back to the original dataframe</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>songs_num <span class="op">=</span> pd.concat([songs_num, songs_num_encoded], axis<span class="op">=</span><span class="dv">1</span>).drop(columns<span class="op">=</span>[<span class="st">'Genres'</span>, <span class="st">'Simplified Genre'</span>])</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>songs_num.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/p2/bg9x0srx2dl9dp4nrwmw4nrc0000gn/T/ipykernel_10132/2605016882.py:3: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  songs_num['Simplified Genre'] = songs_num['Genres'].apply(map_genres_to_categories)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Song Popularity</th>
<th data-quarto-table-cell-role="th">Popularity</th>
<th data-quarto-table-cell-role="th">Explicit</th>
<th data-quarto-table-cell-role="th">Total Artists On Song</th>
<th data-quarto-table-cell-role="th">Duration (ms)_transf</th>
<th data-quarto-table-cell-role="th">Followers_transf</th>
<th data-quarto-table-cell-role="th">Lyrics Word Count_transf</th>
<th data-quarto-table-cell-role="th">neg</th>
<th data-quarto-table-cell-role="th">neu</th>
<th data-quarto-table-cell-role="th">pos</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">Electronic/Experimental</th>
<th data-quarto-table-cell-role="th">Hip Hop/Rap</th>
<th data-quarto-table-cell-role="th">Indie/Alternative</th>
<th data-quarto-table-cell-role="th">K-pop</th>
<th data-quarto-table-cell-role="th">Latin</th>
<th data-quarto-table-cell-role="th">Other</th>
<th data-quarto-table-cell-role="th">Pop</th>
<th data-quarto-table-cell-role="th">R&amp;B</th>
<th data-quarto-table-cell-role="th">Rock</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.93</td>
<td>0.88</td>
<td>False</td>
<td>1.0</td>
<td>0.445229</td>
<td>0.704413</td>
<td>0.724382</td>
<td>0.121</td>
<td>0.454</td>
<td>0.426</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0.88</td>
<td>0.97</td>
<td>True</td>
<td>1.0</td>
<td>0.616143</td>
<td>0.887910</td>
<td>0.782405</td>
<td>0.170</td>
<td>0.719</td>
<td>0.111</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0.86</td>
<td>0.81</td>
<td>True</td>
<td>1.0</td>
<td>0.262534</td>
<td>0.565953</td>
<td>0.726920</td>
<td>0.085</td>
<td>0.840</td>
<td>0.076</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>0.88</td>
<td>0.94</td>
<td>True</td>
<td>1.0</td>
<td>0.280604</td>
<td>0.820911</td>
<td>0.739738</td>
<td>0.017</td>
<td>0.864</td>
<td>0.118</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0.96</td>
<td>0.96</td>
<td>False</td>
<td>1.0</td>
<td>0.417005</td>
<td>0.981764</td>
<td>0.701252</td>
<td>0.150</td>
<td>0.727</td>
<td>0.123</td>
<td>...</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

<p>5 rows × 22 columns</p>
</div>
</div>
</div>
<section id="pca-principal-component-analysis" class="level4">
<h4 class="anchored" data-anchor-id="pca-principal-component-analysis">PCA (Principal Component Analysis)</h4>
<p>The following function for graphing the results of the dimensionality reduction algorithm has been adapted from lab 4.2 from DSAN 5000. The function takes in the converted features and plots the first 2 features against each other in a scatter plot and uses a label to color the plots.</p>
<div id="cell-12" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # UTILITY PLOTTING FUNCTION</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_2D(X,color_vector, dim_red_model):</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    ax.scatter(X[:,<span class="dv">0</span>], X[:,<span class="dv">1</span>],c<span class="op">=</span>color_vector, alpha<span class="op">=</span><span class="fl">0.5</span>) <span class="co">#, c=y</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    ax.<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">'Feature 1 '</span>, ylabel<span class="op">=</span><span class="st">'Feature 2'</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span> dim_red_model <span class="op">+</span> <span class="st">' results'</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    ax.grid()</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code takes in the songs_num df without the Song Popularity column (I wanted to use this opportunity to see if clusters naturally occur regardless of the song’s popularity) and the total artist’s on the song (a non standardized column).</p>
<div id="cell-14" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>pca <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">10</span>)  <span class="co"># 95% of variance</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>pca_result <span class="op">=</span> pca.fit_transform(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>]))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>ranking_group <span class="op">=</span> songs[<span class="st">'Top 10 Song'</span>].astype(<span class="st">'category'</span>).cat.codes</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>plot_2D(pca_result, ranking_group, <span class="st">'PCA'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>I colored the points by whether they were a top 10 song or not. I’m not seeing any clustering with those particular songs, but I am seeing two bigger clusters separated by a diagonal line down the middle, which is interesting. I am not sure what these clusters are indicative of, however.</p>
<div id="cell-16" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pca1 <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">10</span>)  <span class="co"># 95% of variance</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>pca_result_1 <span class="op">=</span> pca1.fit_transform(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>]))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>plot_2D(pca_result_1, ranking_group, <span class="st">'PCA'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Interestingly, when I remove the compound score from the sentiment analysis (leaving the positive, negative, neutral scores) I get much clearer clusters (still separated by the diagonal line) with all but 2 of the top songs in the top left cluster.</p>
<p>The following code has been adapted from lab 4.2. It takes in a pca model and plots the ratio of explained variance by each principal component. It then plots this.</p>
<div id="cell-19" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_variance_explained(pca):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Variance explained by each principal component:"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(pca.explained_variance_ratio_[<span class="dv">0</span>:<span class="dv">10</span>])</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    plt.plot(<span class="bu">range</span>(<span class="bu">len</span>(pca.explained_variance_ratio_)), pca.explained_variance_ratio_, <span class="st">'-o'</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">'Mumber of components'</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'Explained variance ratio'</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Variance Explained by Different PCA Components'</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>plot_variance_explained(pca)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>plot_variance_explained(pca1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Variance explained by each principal component:
[0.32070283 0.15954468 0.11482478 0.06969029 0.05864162 0.05514703
 0.04737073 0.03608452 0.0300553  0.02383462]</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-8-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Variance explained by each principal component:
[0.24156774 0.17060014 0.10147743 0.08326044 0.07891062 0.06986966
 0.05186226 0.04267764 0.034445   0.03158158]</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-8-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>These are two elbow plots showing the ratio of explained variance by each PCA. The first one is for the first model with the elbow point being at 2 components. After this, the explained variance decreases very slowly. For the second one, the elbow point is at either component 2 or 3. Therefore, 2 or 3 components would be optimal for a model.</p>
</section>
<section id="t-sne" class="level4">
<h4 class="anchored" data-anchor-id="t-sne">T-SNE</h4>
<div id="cell-22" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> perplexity <span class="kw">in</span> [<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">50</span>]:</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">2</span>, perplexity<span class="op">=</span>perplexity, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    X_tsne <span class="op">=</span> tsne.fit_transform(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>]))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    plot_2D(X_tsne, ranking_group, <span class="ss">f'T-SNE (perplexity=</span><span class="sc">{</span>perplexity<span class="sc">}</span><span class="ss">)'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-9-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-9-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-9-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>After running t-sne with several different perplexity values, I’m not seeing very many clear clusters. The best option is the first one with a perplexity of 5. I will try again taking out the compound score to see if that improves it.</p>
<div id="cell-24" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> perplexity <span class="kw">in</span> [<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">50</span>]:</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">2</span>, perplexity<span class="op">=</span>perplexity, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    X_tsne <span class="op">=</span> tsne.fit_transform(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>]))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    plot_2D(X_tsne, ranking_group, <span class="ss">f'T-SNE (perplexity=</span><span class="sc">{</span>perplexity<span class="sc">}</span><span class="ss">)'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-10-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-10-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-10-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The above graphs appear to have much clearer clusters. I think the best one is the first one with a perplexity of 5. I see distinct clusters. However, the top-10 songs did not appear to group together.</p>
</section>
<section id="comparison" class="level4">
<h4 class="anchored" data-anchor-id="comparison">Comparison</h4>
<div id="cell-27" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># PCA</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>pca <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>X_pca <span class="op">=</span> pca.fit_transform(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>]))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].scatter(X_pca[:, <span class="dv">0</span>], X_pca[:, <span class="dv">1</span>], c<span class="op">=</span>ranking_group, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'PCA results'</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'PC1'</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'PC2'</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># t-SNE</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">2</span>, perplexity<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>X_tsne <span class="op">=</span> tsne.fit_transform(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>]))</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].scatter(X_tsne[:, <span class="dv">0</span>], X_tsne[:, <span class="dv">1</span>], c<span class="op">=</span>ranking_group, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'t-SNE results'</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Feature 1'</span>)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Feature 2'</span>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>I decided to put the two graphs together on the same subplot. This view of both methods shows that T-SNE did a much better job at visualizing clusters. The clusters are closer together and farther apart from each other. However, PCA did a better job of finding the top-10 songs grouped together (other than the 2 outliers) with T-SNE having 1-3 top 10 songs in each cluster.</p>
<p>In terms of preseriving the data structure, the fact that PCA kept the top-10 grouping as well as the characteristics of the method itself of projecting data in directions of max variance, I am led to believe that it does a good job of preserving the overall trends and variance but not as good of a job on a local level. This, instead, is where T-SNE does better. This might mean that T-SNE will do a better job showing groupings between songs (perhaps functioning as a recommendation system). Visually, T-SNE has more distinct clusters compared to PCA. However, the axes in PCA are more informative because they show the features produced with the greatest variance. Also, the PCA graph seems to have some underlying linearity which is intersting.</p>
<p>The tradeoffs between PCA and T-SNE include the interpretability (with PCA results being meaningful interpretations of the data and T-SNE features being more abstract), dimensionality (PCA can have any number of features while T-SNE is limited to 2-3), and visualization (T-SNE has clearer clusters while PCA’s are more linear) - Source - ChatGPT.</p>
</section>
<section id="k-means" class="level4">
<h4 class="anchored" data-anchor-id="k-means">K-Means</h4>
<p>K Means clustering is a form of unsupervised learning that looks for the underlying patterns within the data without trying to predict pre determined labels. K Means creates K clusters that group together the points that are closest to the means of the clusters. The goal is that by finding the means of the clusters, data that is very similar to each other will all be grouped together and that there will be separations between the different groups. This is ultimately accomplished by minimizing the sum of squares within each cluster. Usually, we have to find the optimal number of K for the data.</p>
<p>The way that it works is by starting out with randomly assigned cluster centroids (means). It then puts each item in the group with it’s closest mean. A new mean is found for the clusters and the points are all reassigned to their nearest centroid. This repeated a given number of times, with the clusters becoming more clear and closer together with each iteration. The method stops when either the centroids stop moving with each iteration or we have hit the maximum number of iterations. The means are calculated using Euclidean distance between all of the input features. The goal is to minimize the sum of squared distances between points and their centroids.</p>
<p>To find the optimal number of clusters, we can use the elbow method, where we graph the inertia vs the num clusters and then pick the elbow point, or where the rate of decrease of the inertia slows down significantly. This will give us the optimal number of clusters before we start losing information. Another option is the silhouette score. The score calculates how good of a match each point is with its cluster as opposed to other clusters. A score close to 1 means the point is close to other points in its own cluster and far away from other clusters. A score of 0 means the point is on the boundary between clusters. A score of -1 means a point is in the wrong cluster. The highest average silhouette score is chosen as the optimal number of clusters because it makes the best-defined clusters.</p>
<p>Source: <a href="https://www.geeksforgeeks.org/k-means-clustering-introduction/">Geeks for Geeks</a></p>
<p>The following code was adapted from lab 4.2. The methods were altered to only handle kmeans and produce final graphs for pca and t-sne based on the above results to visualize the clusters.</p>
<div id="cell-32" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># source: James' lab demonstration</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># function to create different models and fit model to data. Returns model inertia and labels</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> kmean_fit(k, df):</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    kmeans<span class="op">=</span>KMeans(n_clusters<span class="op">=</span>k)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    kmeans.fit(df)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> kmeans.inertia_, kmeans.labels_</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># empty lists to store info about different versions of models to graph</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>ks<span class="op">=</span>[]</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>inertias<span class="op">=</span>[]</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>silhouette_scores <span class="op">=</span> []</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Test different numbers of clusters</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>,<span class="dv">20</span>):</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    inertia, labels <span class="op">=</span> kmean_fit(k, songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>])) <span class="co"># build and fit model</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    ks.append(k) <span class="co"># keep track of number of clusters</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    inertias.append(inertia)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    silhouette_avg <span class="op">=</span> silhouette_score(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>]), labels) <span class="co"># calculate silhouette score</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    silhouette_scores.append(silhouette_avg)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co"># graph num clusters vs inertia</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>plt.plot(ks,inertias,<span class="st">"-o"</span>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Number of Clusters, k"</span>)</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Inertia"</span>)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Elbow Method for Optimal k"</span>)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co"># graph num clusters vs silhouette</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>plt.plot(ks, silhouette_scores, <span class="st">"-o"</span>)</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Number of Clusters, k"</span>)</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Silhouette Score"</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Silhouette Score for Optimal k"</span>)</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co"># choose optimal nclusters of 2 (highest silhouette, inertia)</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>kmeans<span class="op">=</span>KMeans(n_clusters<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>kmeans.fit(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>]))</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>kmeans_labels <span class="op">=</span> kmeans.predict(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>])) <span class="co"># predict labels</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>pca <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>X_pca <span class="op">=</span> pca.fit_transform(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>]))</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>plot_2D(X_pca, kmeans_labels, <span class="st">'PCA'</span>)</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">2</span>, perplexity<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>X_tsne <span class="op">=</span> tsne.fit_transform(songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>]))</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>plot_2D(X_tsne, kmeans_labels, <span class="st">'T-SNE'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-12-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-12-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-12-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Based on the silhouette score and elbow graph, I decided to choose 8 clusters as the optimal number of clusters. I think this was a good choice based on the T-SNE Results graph (the PCA graph is also pretty good, but probably could be better). The colors are separated for the most part and the clusters are far away from each other.</p>
<div id="cell-34" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the K-Means cluster labels back to the original DataFrame</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>songs[<span class="st">'Cluster'</span>] <span class="op">=</span> kmeans_labels</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Group songs by their clusters and display</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cluster_num <span class="kw">in</span> <span class="bu">sorted</span>(songs[<span class="st">'Cluster'</span>].unique()):</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Cluster </span><span class="sc">{</span>cluster_num<span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    display(songs[songs[<span class="st">'Cluster'</span>] <span class="op">==</span> cluster_num][[<span class="st">'Track Name'</span>, <span class="st">'Artists'</span>, <span class="st">'Album'</span>, <span class="st">'Genres'</span>, <span class="st">'Top 10 Song'</span>, <span class="st">'Cluster'</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 0:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Nasty</td>
<td>Tinashe</td>
<td>Nasty</td>
<td>alternative r&amp;b, dance pop, metropopolis, pop,...</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">45</td>
<td>TRYIN' MY HARDEST</td>
<td>SiR</td>
<td>HEAVY</td>
<td>alternative r&amp;b, la pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">60</td>
<td>Love Me JeJe</td>
<td>Tems</td>
<td>Born in the Wild</td>
<td>afro r&amp;b, afrobeats, alte, nigerian pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">65</td>
<td>DENIAL IS A RIVER</td>
<td>Doechii</td>
<td>Alligator Bites Never Heal</td>
<td>alternative r&amp;b</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">69</td>
<td>Lagos Love Story</td>
<td>Ayra Starr</td>
<td>The Year I Turned 21</td>
<td>afrobeats</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 1:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>A Bar Song (Tipsy)</td>
<td>Shaboozey</td>
<td>A Bar Song (Tipsy)</td>
<td>modern country pop, pop rap</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Espresso</td>
<td>Sabrina Carpenter</td>
<td>Short n' Sweet</td>
<td>pop</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>YA YA</td>
<td>Beyoncé</td>
<td>COWBOY CARTER</td>
<td>pop, r&amp;b</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Genesis.</td>
<td>RAYE</td>
<td>Genesis.</td>
<td>uk contemporary r&amp;b, uk pop</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>Gata Only</td>
<td>FloyyMenor</td>
<td>Gata Only</td>
<td>reggaeton chileno</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>HISS</td>
<td>Megan Thee Stallion</td>
<td>HISS</td>
<td>houston rap, pop, rap, trap queen</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>I Had Some Help (Feat. Morgan Wallen)</td>
<td>Post Malone</td>
<td>F-1 Trillion</td>
<td>dfw rap, melodic rap, pop, rap</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>Modern Woman</td>
<td>Eliza McLamb</td>
<td>Going Through It</td>
<td>gen z singer-songwriter</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>Company Culture</td>
<td>Lambrini Girls</td>
<td>Company Culture</td>
<td>None Listed</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">37</td>
<td>obsessed</td>
<td>Olivia Rodrigo</td>
<td>GUTS (spilled)</td>
<td>pop</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">39</td>
<td>Enough (Miami)</td>
<td>Cardi B</td>
<td>Enough (Miami)</td>
<td>pop, rap</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">41</td>
<td>Bon Bon</td>
<td>Fcukers</td>
<td>Bon Bon</td>
<td>None Listed</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">50</td>
<td>Active</td>
<td>Asake</td>
<td>Active</td>
<td>afrobeats, nigerian pop</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">56</td>
<td>Get In With Me</td>
<td>BossMan Dlow</td>
<td>Mr Beat The Road</td>
<td>None Listed</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">58</td>
<td>I Love You, I'm Sorry</td>
<td>Gracie Abrams</td>
<td>The Secret of Us</td>
<td>alt z</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">61</td>
<td>Family Matters</td>
<td>Drake</td>
<td>Family Matters</td>
<td>canadian hip hop, canadian pop, hip hop, pop r...</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">68</td>
<td>JOYRIDE</td>
<td>Kesha</td>
<td>JOYRIDE</td>
<td>dance pop, pop</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 2:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">46</td>
<td>BYE BYE</td>
<td>Kim Gordon</td>
<td>The Collective</td>
<td>no wave, noise rock</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">62</td>
<td>The Lighthouse</td>
<td>Stevie Nicks</td>
<td>The Lighthouse</td>
<td>heartland rock</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">70</td>
<td>Wanting and Waiting</td>
<td>The Black Crowes</td>
<td>Happiness Bastards</td>
<td>album rock, blues rock, classic rock, electric...</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">88</td>
<td>On The Game</td>
<td>The Black Keys</td>
<td>Ohio Players</td>
<td>alternative rock, blues rock, garage rock, ind...</td>
<td>0</td>
<td>2</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 3:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Not Like Us</td>
<td>Kendrick Lamar</td>
<td>Not Like Us</td>
<td>conscious hip hop, hip hop, rap, west coast rap</td>
<td>1</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Type Shit</td>
<td>Future</td>
<td>WE DON'T TRUST YOU</td>
<td>atl hip hop, hip hop, rap, southern hip hop, trap</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>euphoria</td>
<td>Kendrick Lamar</td>
<td>euphoria</td>
<td>conscious hip hop, hip hop, rap, west coast rap</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>Tough</td>
<td>Quavo</td>
<td>Tough</td>
<td>atl hip hop, melodic rap, rap, trap</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>TGIF</td>
<td>GloRilla</td>
<td>GLORIOUS</td>
<td>southern hip hop</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">35</td>
<td>Never Lose Me (feat. SZA &amp; Cardi B)</td>
<td>Flo Milli</td>
<td>Fine Ho, Stay</td>
<td>viral rap</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>Get It Sexyy</td>
<td>Sexyy Red</td>
<td>In Sexyy We Trust</td>
<td>trap queen</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">64</td>
<td>Fine Art</td>
<td>KNEECAP</td>
<td>Fine Art</td>
<td>irish hip hop</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">72</td>
<td>No One Else (feat. Jeremih)</td>
<td>Lola Brooke</td>
<td>No One Else (feat. Jeremih)</td>
<td>trap queen</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">84</td>
<td>KEHLANI (REMIX) [feat. Kehlani]</td>
<td>Jordan Adetunji</td>
<td>KEHLANI (REMIX) [feat. Kehlani]</td>
<td>irish hip hop</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">87</td>
<td>Big Dawgs</td>
<td>Hanumankind</td>
<td>Big Dawgs</td>
<td>desi hip hop, indian underground rap, malayala...</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">92</td>
<td>ADIVINO</td>
<td>Myke Towers</td>
<td>ADIVINO</td>
<td>reggaeton, trap latino, urbano latino</td>
<td>0</td>
<td>3</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 4:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>BIRDS OF A FEATHER</td>
<td>Billie Eilish</td>
<td>HIT ME HARD AND SOFT</td>
<td>art pop, pop</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>Girl, so confusing featuring lorde</td>
<td>Charli xcx</td>
<td>Brat and it’s completely different but also st...</td>
<td>art pop, candy pop, metropopolis, pop, uk pop</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Disease</td>
<td>Lady Gaga</td>
<td>Disease</td>
<td>art pop, dance pop, pop</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>Von dutch</td>
<td>Charli xcx</td>
<td>BRAT</td>
<td>art pop, candy pop, metropopolis, pop, uk pop</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">31</td>
<td>Always and Forever (feat. Hannah Diamond)</td>
<td>SOPHIE</td>
<td>SOPHIE</td>
<td>art pop, bubblegum bass, deconstructed club, e...</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>Fisherrr - Remix</td>
<td>Cash Cobain</td>
<td>Fisherrr (Remix)</td>
<td>jersey club</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">42</td>
<td>Driver</td>
<td>Soccer Mommy</td>
<td>Evergreen</td>
<td>art pop, bubblegrunge, indie pop, indie rock, ...</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">47</td>
<td>In The Wawa (Convinced I Am God)</td>
<td>Lip Critic</td>
<td>Hex Dealer</td>
<td>digital hardcore</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">53</td>
<td>World on a String</td>
<td>Jessica Pratt</td>
<td>Here in the Pitch</td>
<td>ambient folk, art pop, freak folk</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">55</td>
<td>Starburster</td>
<td>Fontaines D.C.</td>
<td>Romance</td>
<td>crank wave, irish indie rock, irish post-punk</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">57</td>
<td>Like I Say (I runaway)</td>
<td>Nilüfer Yanya</td>
<td>My Method Actor</td>
<td>art pop, experimental pop, uk alternative pop</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">78</td>
<td>Ajhussi</td>
<td>Flying Lotus</td>
<td>Spirit Box</td>
<td>afrofuturism, alternative hip hop, electronica...</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">91</td>
<td>Britpop</td>
<td>A. G. Cook</td>
<td>Britpop</td>
<td>bubblegum bass, escape room, hyperpop, proto-h...</td>
<td>0</td>
<td>4</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 5:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Good Luck, Babe!</td>
<td>Chappell Roan</td>
<td>Good Luck, Babe!</td>
<td>indie pop</td>
<td>1</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Right Back to It</td>
<td>Waxahatchee</td>
<td>Tigers Blood</td>
<td>alabama indie, bubblegrunge, chamber pop, coun...</td>
<td>1</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>Docket (feat. Bully)</td>
<td>Blondshell</td>
<td>Docket (feat. Bully)</td>
<td>bubblegrunge, indie pop</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Juna</td>
<td>Clairo</td>
<td>Charm</td>
<td>bedroom pop, indie pop, pov: indie</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">52</td>
<td>Never Need Me</td>
<td>Rachel Chinouriri</td>
<td>What A Devastating Turn of Events</td>
<td>indie pop, uk pop</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">63</td>
<td>Soup</td>
<td>Remi Wolf</td>
<td>Big Ideas</td>
<td>indie pop, modern alternative pop</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">67</td>
<td>Beaches</td>
<td>beabadoobee</td>
<td>This Is How Tomorrow Moves</td>
<td>bedroom pop, bubblegrunge, indie pop, pov: indie</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">76</td>
<td>Can't Be Still</td>
<td>illuminati hotties</td>
<td>POWER</td>
<td>bubblegrunge</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">79</td>
<td>California Highway 99</td>
<td>The Softies</td>
<td>The Bed I Made</td>
<td>sacramento indie, tape club, twee pop</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">82</td>
<td>Milk</td>
<td>Abby Sage</td>
<td>The Rot</td>
<td>modern indie pop</td>
<td>0</td>
<td>5</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 6:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>Pink Skies</td>
<td>Zach Bryan</td>
<td>Pink Skies</td>
<td>classic oklahoma country</td>
<td>1</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">22</td>
<td>Angel Of My Dreams</td>
<td>JADE</td>
<td>Angel Of My Dreams</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>She's Leaving You</td>
<td>MJ Lenderman</td>
<td>Manning Fireworks</td>
<td>asheville indie, countrygaze, slacker rock</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">36</td>
<td>Darkest Hour (Helene Edit)</td>
<td>Eric Church</td>
<td>Darkest Hour (Helene Edit)</td>
<td>contemporary country, country, country road</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">40</td>
<td>Si Antes Te Hubiera Conocido</td>
<td>KAROL G</td>
<td>Si Antes Te Hubiera Conocido</td>
<td>reggaeton, reggaeton colombiano, urbano latino</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">48</td>
<td>Perfume</td>
<td>The Dare</td>
<td>What's Wrong With New York?</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">51</td>
<td>Cardinal</td>
<td>Kacey Musgraves</td>
<td>Deeper Well</td>
<td>classic texas country, contemporary country, c...</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">71</td>
<td>Carousel Horses</td>
<td>Christian Lee Hutson</td>
<td>Paradise Pop. 10</td>
<td>countrygaze, deep new americana</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">74</td>
<td>Midas</td>
<td>Wunderhorse</td>
<td>Midas</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">77</td>
<td>Radio Wave</td>
<td>Silverada</td>
<td>Silverada</td>
<td>classic texas country, red dirt, roots americana</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">81</td>
<td>Masquerade</td>
<td>Original Cast of Stereophonic</td>
<td>Stereophonic (Original Cast Recording)</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">83</td>
<td>Dammit Randy</td>
<td>Miranda Lambert</td>
<td>Dammit Randy</td>
<td>contemporary country, country, country dawn, c...</td>
<td>0</td>
<td>6</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 7:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Too Sweet</td>
<td>Hozier</td>
<td>Unreal Unearth: Unaired</td>
<td>irish singer-songwriter, modern rock, pop, pov...</td>
<td>1</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>we can't be friends (wait for your love)</td>
<td>Ariana Grande</td>
<td>eternal sunshine</td>
<td>pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>Taste</td>
<td>Sabrina Carpenter</td>
<td>Short n' Sweet</td>
<td>pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">20</td>
<td>APT.</td>
<td>ROSÉ</td>
<td>APT.</td>
<td>k-pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>Diet Pepsi</td>
<td>Addison Rae</td>
<td>Diet Pepsi</td>
<td>social media pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>The Prophecy</td>
<td>Taylor Swift</td>
<td>THE TORTURED POETS DEPARTMENT: THE ANTHOLOGY</td>
<td>pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">34</td>
<td>How Sweet</td>
<td>NewJeans</td>
<td>How Sweet</td>
<td>k-pop, k-pop girl group</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">38</td>
<td>Igual Que Un Ángel (with Peso Pluma)</td>
<td>Kali Uchis</td>
<td>ORQUÍDEAS</td>
<td>colombian pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">43</td>
<td>Anything</td>
<td>Griff</td>
<td>Vertigo</td>
<td>alt z, uk pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">44</td>
<td>Saturn</td>
<td>SZA</td>
<td>Saturn</td>
<td>pop, r&amp;b, rap</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>Cómo Dónde y Cuándo</td>
<td>Shakira</td>
<td>Las Mujeres Ya No Lloran</td>
<td>colombian pop, dance pop, latin pop, pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">59</td>
<td>215634</td>
<td>Elvie Shane</td>
<td>Damascus</td>
<td>modern country pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">66</td>
<td>New Woman (feat. ROSALÍA)</td>
<td>LISA</td>
<td>New Woman (feat. ROSALÍA)</td>
<td>k-pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">73</td>
<td>Training Season</td>
<td>Dua Lipa</td>
<td>Radical Optimism</td>
<td>dance pop, pop, uk pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75</td>
<td>Piece of My Heart (feat. Brent Faiyaz)</td>
<td>Wizkid</td>
<td>Piece of My Heart (feat. Brent Faiyaz)</td>
<td>afrobeats, afropop, azonto, nigerian hip hop, ...</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">80</td>
<td>Use Me</td>
<td>Zach Top</td>
<td>Cold Beer &amp; Country Music</td>
<td>modern country pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">85</td>
<td>That's My Floor</td>
<td>Magdalena Bay</td>
<td>Imaginal Disk</td>
<td>la pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">86</td>
<td>In Front of Me Now</td>
<td>Nada Surf</td>
<td>Moon Mirror</td>
<td>power pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">89</td>
<td>After Hours</td>
<td>Kehlani</td>
<td>CRASH</td>
<td>pop, r&amp;b, rap</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">90</td>
<td>XO (Only If You Say Yes)</td>
<td>ENHYPEN</td>
<td>ROMANCE : UNTOLD</td>
<td>anime, k-pop boy group</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">93</td>
<td>Beautiful Things</td>
<td>Benson Boone</td>
<td>Fireworks &amp; Rollerblades</td>
<td>singer-songwriter pop</td>
<td>0</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>I decided to display the playlists that would be made from these clusters. Looking at them, I can see that genre had a huge influence on the clusters, but there is also some variation that came from the other features. A manual overview of these playlists make me think that the algorithm did a good job. A lot of these artists (like Sabrina Carpenter, Taylor Swift, Ariana Grande, and Dua Lipa in cluster 7) are often listened to together. Overall, this method was strong. The top 10 songs were not clustered together, however. In regards to this as a known class, this method did not do a great job.</p>
</section>
<section id="dbscan" class="level4">
<h4 class="anchored" data-anchor-id="dbscan">DBSCAN</h4>
<p>DBSCAN is also a method for unsupervised learning where labels aren’t provided to the model so it tries to figure out the underlying patterns in the data. DBSCAN stands for density-based spatial clustering of applications with noise. DBSCAN is special because it doesn’t require clear shapes for the clusters and does not require optimization for the number of clusters. It also does a good job with noise. The main concept is the density of points, where we look for spaces that have a high density of points separated by spaces with a low density of points.</p>
<p>By separating points into core points (points with a min num of points in a specified range), border points (points within the specified range to the cores but don’t achieve the min num points), and noise points (points that don’t fit into either category and aren’t really able to be included in a cluster), DBSCAN can make clusters that are arbitrary shapes and identify outliers. We can choose the max distance between points to be considered in the same cluster and the num points required to be considered a core point. The algorithm starts with a random point, finds all points that are close to it, counts how many there are, and labels the point a core or noise. If it is chosen as a core, then it creates a cluster and begins adding points to those clusters. It keeps adding core points until it hits a point classified as a border. Then, we go to another point that hasn’t been classified yet. This is repeated until all points have been classified and analyzed. Finally, noise points are revisited to see if they are in a cluster. Anything left over is called noise.</p>
<p>We optimize the parameters (distance, min neighbors) using the silhouette score. We check for the max silhouette score by checking different possibilities for epsilon and min_samples and then calculating the average silhouette. The pair that gave us this max allows us to get the optimal parameters.</p>
<p>Source: <a href="https://www.datacamp.com/tutorial/dbscan-clustering-algorithm">Data Camp</a></p>
<p>Code below is adapted from lab 4.2. I needed to add functionality for different numbers of clusters and pick what options to loop through to test different values for eps and min samples. I also added the new graphing functionality.</p>
<div id="cell-39" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>scores_analysis <span class="op">=</span> songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>])</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># holders to fill in with chosen scores</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>best_eps <span class="op">=</span> <span class="va">None</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>best_min_samples <span class="op">=</span> <span class="va">None</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>best_score <span class="op">=</span> <span class="op">-</span><span class="dv">1</span> <span class="co"># lowest possible score is -1 so look for a bigger score than that</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># loop through different options of eps and min_samples</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> eps <span class="kw">in</span> np.arange(<span class="fl">0.1</span>, <span class="fl">1.0</span>, <span class="fl">0.1</span>):</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> min_samples <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>, <span class="dv">10</span>):</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>        dbscan <span class="op">=</span> DBSCAN(eps<span class="op">=</span>eps, min_samples<span class="op">=</span>min_samples) <span class="co"># build model</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>        cluster_labels <span class="op">=</span> dbscan.fit_predict(scores_analysis) <span class="co"># get label</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>        n_clusters <span class="op">=</span> <span class="bu">len</span>(<span class="bu">set</span>(cluster_labels)) <span class="op">-</span> (<span class="dv">1</span> <span class="cf">if</span> <span class="op">-</span><span class="dv">1</span> <span class="kw">in</span> cluster_labels <span class="cf">else</span> <span class="dv">0</span>)  <span class="co"># Exclude noise points (-1)</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n_clusters <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>        score <span class="op">=</span> silhouette_score(scores_analysis, cluster_labels) <span class="co"># calculate score</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> score <span class="op">&gt;</span> best_score: <span class="co"># if score improved</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>            best_eps <span class="op">=</span> eps <span class="co"># save current eps</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>            best_min_samples <span class="op">=</span> min_samples <span class="co"># save current min_samples</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>            best_score <span class="op">=</span> score <span class="co"># save current best score</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="co"># create model with chosen optimal values</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>dbscan <span class="op">=</span> DBSCAN(eps<span class="op">=</span>best_eps, min_samples<span class="op">=</span>best_min_samples)</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>dbscan_labels <span class="op">=</span> dbscan.fit_predict(scores_analysis)</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>pca <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>X_pca <span class="op">=</span> pca.fit_transform(scores_analysis)</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>plot_2D(X_pca, dbscan_labels, <span class="st">'PCA'</span>)</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">2</span>, perplexity<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>X_tsne <span class="op">=</span> tsne.fit_transform(scores_analysis)</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>plot_2D(X_tsne, dbscan_labels, <span class="st">'T-SNE'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-14-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The above are the results of DBSCAN clustering after optimizing the parameters. The T-SNE graph shows some very promising clusters. The purple cluster seems to be a bit concerning, but other clusters are separated from each other and do a good job collect nearby points are a bit more spread out. The clusters aren’t quite so clear in this case.</p>
<div id="cell-41" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>songs[<span class="st">'dbscan_Cluster'</span>] <span class="op">=</span> dbscan_labels</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Group songs by their clusters and display</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cluster_num <span class="kw">in</span> <span class="bu">sorted</span>(songs[<span class="st">'dbscan_Cluster'</span>].unique()):</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Cluster </span><span class="sc">{</span>cluster_num<span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    display(songs[songs[<span class="st">'dbscan_Cluster'</span>] <span class="op">==</span> cluster_num][[<span class="st">'Track Name'</span>, <span class="st">'Artists'</span>, <span class="st">'Album'</span>, <span class="st">'Genres'</span>, <span class="st">'Top 10 Song'</span>, <span class="st">'dbscan_Cluster'</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster -1:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Too Sweet</td>
<td>Hozier</td>
<td>Unreal Unearth: Unaired</td>
<td>irish singer-songwriter, modern rock, pop, pov...</td>
<td>1</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>Nasty</td>
<td>Tinashe</td>
<td>Nasty</td>
<td>alternative r&amp;b, dance pop, metropopolis, pop,...</td>
<td>1</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>Right Back to It</td>
<td>Waxahatchee</td>
<td>Tigers Blood</td>
<td>alabama indie, bubblegrunge, chamber pop, coun...</td>
<td>1</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>Gata Only</td>
<td>FloyyMenor</td>
<td>Gata Only</td>
<td>reggaeton chileno</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>She's Leaving You</td>
<td>MJ Lenderman</td>
<td>Manning Fireworks</td>
<td>asheville indie, countrygaze, slacker rock</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>Von dutch</td>
<td>Charli xcx</td>
<td>BRAT</td>
<td>art pop, candy pop, metropopolis, pop, uk pop</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>Tough</td>
<td>Quavo</td>
<td>Tough</td>
<td>atl hip hop, melodic rap, rap, trap</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>Fisherrr - Remix</td>
<td>Cash Cobain</td>
<td>Fisherrr (Remix)</td>
<td>jersey club</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">40</td>
<td>Si Antes Te Hubiera Conocido</td>
<td>KAROL G</td>
<td>Si Antes Te Hubiera Conocido</td>
<td>reggaeton, reggaeton colombiano, urbano latino</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">42</td>
<td>Driver</td>
<td>Soccer Mommy</td>
<td>Evergreen</td>
<td>art pop, bubblegrunge, indie pop, indie rock, ...</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">47</td>
<td>In The Wawa (Convinced I Am God)</td>
<td>Lip Critic</td>
<td>Hex Dealer</td>
<td>digital hardcore</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50</td>
<td>Active</td>
<td>Asake</td>
<td>Active</td>
<td>afrobeats, nigerian pop</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>Cómo Dónde y Cuándo</td>
<td>Shakira</td>
<td>Las Mujeres Ya No Lloran</td>
<td>colombian pop, dance pop, latin pop, pop</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">55</td>
<td>Starburster</td>
<td>Fontaines D.C.</td>
<td>Romance</td>
<td>crank wave, irish indie rock, irish post-punk</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">57</td>
<td>Like I Say (I runaway)</td>
<td>Nilüfer Yanya</td>
<td>My Method Actor</td>
<td>art pop, experimental pop, uk alternative pop</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">63</td>
<td>Soup</td>
<td>Remi Wolf</td>
<td>Big Ideas</td>
<td>indie pop, modern alternative pop</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">65</td>
<td>DENIAL IS A RIVER</td>
<td>Doechii</td>
<td>Alligator Bites Never Heal</td>
<td>alternative r&amp;b</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">69</td>
<td>Lagos Love Story</td>
<td>Ayra Starr</td>
<td>The Year I Turned 21</td>
<td>afrobeats</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75</td>
<td>Piece of My Heart (feat. Brent Faiyaz)</td>
<td>Wizkid</td>
<td>Piece of My Heart (feat. Brent Faiyaz)</td>
<td>afrobeats, afropop, azonto, nigerian hip hop, ...</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">76</td>
<td>Can't Be Still</td>
<td>illuminati hotties</td>
<td>POWER</td>
<td>bubblegrunge</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">78</td>
<td>Ajhussi</td>
<td>Flying Lotus</td>
<td>Spirit Box</td>
<td>afrofuturism, alternative hip hop, electronica...</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">88</td>
<td>On The Game</td>
<td>The Black Keys</td>
<td>Ohio Players</td>
<td>alternative rock, blues rock, garage rock, ind...</td>
<td>0</td>
<td>-1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">92</td>
<td>ADIVINO</td>
<td>Myke Towers</td>
<td>ADIVINO</td>
<td>reggaeton, trap latino, urbano latino</td>
<td>0</td>
<td>-1</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 0:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Good Luck, Babe!</td>
<td>Chappell Roan</td>
<td>Good Luck, Babe!</td>
<td>indie pop</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>Docket (feat. Bully)</td>
<td>Blondshell</td>
<td>Docket (feat. Bully)</td>
<td>bubblegrunge, indie pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>Juna</td>
<td>Clairo</td>
<td>Charm</td>
<td>bedroom pop, indie pop, pov: indie</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">52</td>
<td>Never Need Me</td>
<td>Rachel Chinouriri</td>
<td>What A Devastating Turn of Events</td>
<td>indie pop, uk pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">67</td>
<td>Beaches</td>
<td>beabadoobee</td>
<td>This Is How Tomorrow Moves</td>
<td>bedroom pop, bubblegrunge, indie pop, pov: indie</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">79</td>
<td>California Highway 99</td>
<td>The Softies</td>
<td>The Bed I Made</td>
<td>sacramento indie, tape club, twee pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">82</td>
<td>Milk</td>
<td>Abby Sage</td>
<td>The Rot</td>
<td>modern indie pop</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 1:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Not Like Us</td>
<td>Kendrick Lamar</td>
<td>Not Like Us</td>
<td>conscious hip hop, hip hop, rap, west coast rap</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Type Shit</td>
<td>Future</td>
<td>WE DON'T TRUST YOU</td>
<td>atl hip hop, hip hop, rap, southern hip hop, trap</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>euphoria</td>
<td>Kendrick Lamar</td>
<td>euphoria</td>
<td>conscious hip hop, hip hop, rap, west coast rap</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>TGIF</td>
<td>GloRilla</td>
<td>GLORIOUS</td>
<td>southern hip hop</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">35</td>
<td>Never Lose Me (feat. SZA &amp; Cardi B)</td>
<td>Flo Milli</td>
<td>Fine Ho, Stay</td>
<td>viral rap</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">49</td>
<td>Get It Sexyy</td>
<td>Sexyy Red</td>
<td>In Sexyy We Trust</td>
<td>trap queen</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">64</td>
<td>Fine Art</td>
<td>KNEECAP</td>
<td>Fine Art</td>
<td>irish hip hop</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">72</td>
<td>No One Else (feat. Jeremih)</td>
<td>Lola Brooke</td>
<td>No One Else (feat. Jeremih)</td>
<td>trap queen</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">84</td>
<td>KEHLANI (REMIX) [feat. Kehlani]</td>
<td>Jordan Adetunji</td>
<td>KEHLANI (REMIX) [feat. Kehlani]</td>
<td>irish hip hop</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">87</td>
<td>Big Dawgs</td>
<td>Hanumankind</td>
<td>Big Dawgs</td>
<td>desi hip hop, indian underground rap, malayala...</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 2:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>A Bar Song (Tipsy)</td>
<td>Shaboozey</td>
<td>A Bar Song (Tipsy)</td>
<td>modern country pop, pop rap</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">24</td>
<td>HISS</td>
<td>Megan Thee Stallion</td>
<td>HISS</td>
<td>houston rap, pop, rap, trap queen</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>I Had Some Help (Feat. Morgan Wallen)</td>
<td>Post Malone</td>
<td>F-1 Trillion</td>
<td>dfw rap, melodic rap, pop, rap</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">39</td>
<td>Enough (Miami)</td>
<td>Cardi B</td>
<td>Enough (Miami)</td>
<td>pop, rap</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">61</td>
<td>Family Matters</td>
<td>Drake</td>
<td>Family Matters</td>
<td>canadian hip hop, canadian pop, hip hop, pop r...</td>
<td>0</td>
<td>2</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 3:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Espresso</td>
<td>Sabrina Carpenter</td>
<td>Short n' Sweet</td>
<td>pop</td>
<td>1</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>Modern Woman</td>
<td>Eliza McLamb</td>
<td>Going Through It</td>
<td>gen z singer-songwriter</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">37</td>
<td>obsessed</td>
<td>Olivia Rodrigo</td>
<td>GUTS (spilled)</td>
<td>pop</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">58</td>
<td>I Love You, I'm Sorry</td>
<td>Gracie Abrams</td>
<td>The Secret of Us</td>
<td>alt z</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">68</td>
<td>JOYRIDE</td>
<td>Kesha</td>
<td>JOYRIDE</td>
<td>dance pop, pop</td>
<td>0</td>
<td>3</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 4:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>BIRDS OF A FEATHER</td>
<td>Billie Eilish</td>
<td>HIT ME HARD AND SOFT</td>
<td>art pop, pop</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>Girl, so confusing featuring lorde</td>
<td>Charli xcx</td>
<td>Brat and it’s completely different but also st...</td>
<td>art pop, candy pop, metropopolis, pop, uk pop</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Disease</td>
<td>Lady Gaga</td>
<td>Disease</td>
<td>art pop, dance pop, pop</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>Always and Forever (feat. Hannah Diamond)</td>
<td>SOPHIE</td>
<td>SOPHIE</td>
<td>art pop, bubblegum bass, deconstructed club, e...</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">53</td>
<td>World on a String</td>
<td>Jessica Pratt</td>
<td>Here in the Pitch</td>
<td>ambient folk, art pop, freak folk</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">91</td>
<td>Britpop</td>
<td>A. G. Cook</td>
<td>Britpop</td>
<td>bubblegum bass, escape room, hyperpop, proto-h...</td>
<td>0</td>
<td>4</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 5:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>Pink Skies</td>
<td>Zach Bryan</td>
<td>Pink Skies</td>
<td>classic oklahoma country</td>
<td>1</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">36</td>
<td>Darkest Hour (Helene Edit)</td>
<td>Eric Church</td>
<td>Darkest Hour (Helene Edit)</td>
<td>contemporary country, country, country road</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">51</td>
<td>Cardinal</td>
<td>Kacey Musgraves</td>
<td>Deeper Well</td>
<td>classic texas country, contemporary country, c...</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">71</td>
<td>Carousel Horses</td>
<td>Christian Lee Hutson</td>
<td>Paradise Pop. 10</td>
<td>countrygaze, deep new americana</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">77</td>
<td>Radio Wave</td>
<td>Silverada</td>
<td>Silverada</td>
<td>classic texas country, red dirt, roots americana</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">83</td>
<td>Dammit Randy</td>
<td>Miranda Lambert</td>
<td>Dammit Randy</td>
<td>contemporary country, country, country dawn, c...</td>
<td>0</td>
<td>5</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 6:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>YA YA</td>
<td>Beyoncé</td>
<td>COWBOY CARTER</td>
<td>pop, r&amp;b</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Genesis.</td>
<td>RAYE</td>
<td>Genesis.</td>
<td>uk contemporary r&amp;b, uk pop</td>
<td>0</td>
<td>6</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 7:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>we can't be friends (wait for your love)</td>
<td>Ariana Grande</td>
<td>eternal sunshine</td>
<td>pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>Taste</td>
<td>Sabrina Carpenter</td>
<td>Short n' Sweet</td>
<td>pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>Diet Pepsi</td>
<td>Addison Rae</td>
<td>Diet Pepsi</td>
<td>social media pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">32</td>
<td>The Prophecy</td>
<td>Taylor Swift</td>
<td>THE TORTURED POETS DEPARTMENT: THE ANTHOLOGY</td>
<td>pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">38</td>
<td>Igual Que Un Ángel (with Peso Pluma)</td>
<td>Kali Uchis</td>
<td>ORQUÍDEAS</td>
<td>colombian pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">43</td>
<td>Anything</td>
<td>Griff</td>
<td>Vertigo</td>
<td>alt z, uk pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">59</td>
<td>215634</td>
<td>Elvie Shane</td>
<td>Damascus</td>
<td>modern country pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">73</td>
<td>Training Season</td>
<td>Dua Lipa</td>
<td>Radical Optimism</td>
<td>dance pop, pop, uk pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">80</td>
<td>Use Me</td>
<td>Zach Top</td>
<td>Cold Beer &amp; Country Music</td>
<td>modern country pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">85</td>
<td>That's My Floor</td>
<td>Magdalena Bay</td>
<td>Imaginal Disk</td>
<td>la pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">86</td>
<td>In Front of Me Now</td>
<td>Nada Surf</td>
<td>Moon Mirror</td>
<td>power pop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">93</td>
<td>Beautiful Things</td>
<td>Benson Boone</td>
<td>Fireworks &amp; Rollerblades</td>
<td>singer-songwriter pop</td>
<td>0</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 8:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>APT.</td>
<td>ROSÉ</td>
<td>APT.</td>
<td>k-pop</td>
<td>0</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">34</td>
<td>How Sweet</td>
<td>NewJeans</td>
<td>How Sweet</td>
<td>k-pop, k-pop girl group</td>
<td>0</td>
<td>8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">66</td>
<td>New Woman (feat. ROSALÍA)</td>
<td>LISA</td>
<td>New Woman (feat. ROSALÍA)</td>
<td>k-pop</td>
<td>0</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">90</td>
<td>XO (Only If You Say Yes)</td>
<td>ENHYPEN</td>
<td>ROMANCE : UNTOLD</td>
<td>anime, k-pop boy group</td>
<td>0</td>
<td>8</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 9:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>Angel Of My Dreams</td>
<td>JADE</td>
<td>Angel Of My Dreams</td>
<td>None Listed</td>
<td>0</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">48</td>
<td>Perfume</td>
<td>The Dare</td>
<td>What's Wrong With New York?</td>
<td>None Listed</td>
<td>0</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">74</td>
<td>Midas</td>
<td>Wunderhorse</td>
<td>Midas</td>
<td>None Listed</td>
<td>0</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">81</td>
<td>Masquerade</td>
<td>Original Cast of Stereophonic</td>
<td>Stereophonic (Original Cast Recording)</td>
<td>None Listed</td>
<td>0</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 10:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>Company Culture</td>
<td>Lambrini Girls</td>
<td>Company Culture</td>
<td>None Listed</td>
<td>0</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">41</td>
<td>Bon Bon</td>
<td>Fcukers</td>
<td>Bon Bon</td>
<td>None Listed</td>
<td>0</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">56</td>
<td>Get In With Me</td>
<td>BossMan Dlow</td>
<td>Mr Beat The Road</td>
<td>None Listed</td>
<td>0</td>
<td>10</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 11:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">44</td>
<td>Saturn</td>
<td>SZA</td>
<td>Saturn</td>
<td>pop, r&amp;b, rap</td>
<td>0</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">89</td>
<td>After Hours</td>
<td>Kehlani</td>
<td>CRASH</td>
<td>pop, r&amp;b, rap</td>
<td>0</td>
<td>11</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 12:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">45</td>
<td>TRYIN' MY HARDEST</td>
<td>SiR</td>
<td>HEAVY</td>
<td>alternative r&amp;b, la pop</td>
<td>0</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">60</td>
<td>Love Me JeJe</td>
<td>Tems</td>
<td>Born in the Wild</td>
<td>afro r&amp;b, afrobeats, alte, nigerian pop</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 13:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">dbscan_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">46</td>
<td>BYE BYE</td>
<td>Kim Gordon</td>
<td>The Collective</td>
<td>no wave, noise rock</td>
<td>0</td>
<td>13</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">62</td>
<td>The Lighthouse</td>
<td>Stevie Nicks</td>
<td>The Lighthouse</td>
<td>heartland rock</td>
<td>0</td>
<td>13</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">70</td>
<td>Wanting and Waiting</td>
<td>The Black Crowes</td>
<td>Happiness Bastards</td>
<td>album rock, blues rock, classic rock, electric...</td>
<td>0</td>
<td>13</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Again, after looking at the playlists, I can see how genre has the biggest influence on these clusters. These actually seem to be a bit more accurate with the playlists. However, none of the top-10 songs were clustered together. That means that this was not optimal in identifying hit songs.</p>
</section>
<section id="hierarchical-agglomerative-clustering" class="level4">
<h4 class="anchored" data-anchor-id="hierarchical-agglomerative-clustering">Hierarchical (Agglomerative) Clustering</h4>
<p>Hierarchical clustering is a way to build a hierarchy of clusters when we don’t know how many clusters we should make. The goal is to get nested groupings of data points that progressively increase the number of points assigned to the clusters. I am planning on using agglomerative clustering which is also known as a “bottom-up” approach. The final clusters can be visualized in a tree called a dendogram that shows how the different levels of clusters changes.</p>
<p>Agglomerative clustering starts by assuming every data point is its own cluster and then progressively adding more points. The method first finds the distance between each pair of points using Euclidean distance. It then finds the two closest clusters and merges them into a new cluster. It then finds the new distance between this cluster and the other clusters. This goes on until all of the data points are put into one cluster or there is some other stopping criteria (max iterations, num clusters).</p>
<p>We can find the optimal number of clusters using the silhouette scores. By finding the number of clusters that provided the maximum average silhouette score, we find the optimal that should be used.</p>
<p>Source: <a href="https://www.geeksforgeeks.org/hierarchical-clustering-with-scikit-learn/">Geeks for Geeks</a></p>
<div id="cell-45" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>scores_analysis <span class="op">=</span> songs_num.drop(columns<span class="op">=</span>[<span class="st">'Song Popularity'</span>, <span class="st">'Total Artists On Song'</span>, <span class="st">'compound'</span>])</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># holders to fill in with chosen scores</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>best_cs <span class="op">=</span><span class="va">None</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>best_score <span class="op">=</span> <span class="op">-</span><span class="dv">1</span> <span class="co"># lowest possible score is -1 so look for a bigger score than that</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># loop through different options of n_clusters</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n_cs <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>, <span class="dv">10</span>):</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    agg_clust <span class="op">=</span> AgglomerativeClustering(n_clusters<span class="op">=</span>n_cs) <span class="co"># build model</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    cluster_labels <span class="op">=</span> agg_clust.fit_predict(scores_analysis) <span class="co"># get label</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    n_clusters <span class="op">=</span> <span class="bu">len</span>(<span class="bu">set</span>(cluster_labels)) <span class="op">-</span> (<span class="dv">1</span> <span class="cf">if</span> <span class="op">-</span><span class="dv">1</span> <span class="kw">in</span> cluster_labels <span class="cf">else</span> <span class="dv">0</span>)  <span class="co"># Exclude noise points (-1)</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n_clusters <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> silhouette_score(scores_analysis, cluster_labels) <span class="co"># calculate score</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> score <span class="op">&gt;</span> best_score: <span class="co"># if score improved</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>        best_cs <span class="op">=</span> n_cs</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>        best_score <span class="op">=</span> score <span class="co"># save current best score</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="co"># create model with chosen optimal values</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>agg_clust <span class="op">=</span> AgglomerativeClustering(n_clusters<span class="op">=</span>best_cs)</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>agg_labels <span class="op">=</span> agg_clust.fit_predict(scores_analysis)</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>pca <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>X_pca <span class="op">=</span> pca.fit_transform(scores_analysis)</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>plot_2D(X_pca, agg_labels, <span class="st">'PCA'</span>)</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">2</span>, perplexity<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>X_tsne <span class="op">=</span> tsne.fit_transform(scores_analysis)</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>plot_2D(X_tsne, agg_labels, <span class="st">'T-SNE'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/cell-16-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>These clusters are extremely clear in the T-SNE graph. They are all distinct and separated from each other. The PCA graph also has good clusters on the left side, but the right side is not as clear. Overall, I think this is the best method for clustering.</p>
<div id="cell-47" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>songs[<span class="st">'agg_Cluster'</span>] <span class="op">=</span> agg_labels</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Group songs by their clusters and display</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cluster_num <span class="kw">in</span> <span class="bu">sorted</span>(songs[<span class="st">'agg_Cluster'</span>].unique()):</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Cluster </span><span class="sc">{</span>cluster_num<span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    display(songs[songs[<span class="st">'agg_Cluster'</span>] <span class="op">==</span> cluster_num][[<span class="st">'Track Name'</span>, <span class="st">'Artists'</span>, <span class="st">'Album'</span>, <span class="st">'Genres'</span>, <span class="st">'Top 10 Song'</span>, <span class="st">'agg_Cluster'</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 0:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>A Bar Song (Tipsy)</td>
<td>Shaboozey</td>
<td>A Bar Song (Tipsy)</td>
<td>modern country pop, pop rap</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Espresso</td>
<td>Sabrina Carpenter</td>
<td>Short n' Sweet</td>
<td>pop</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>YA YA</td>
<td>Beyoncé</td>
<td>COWBOY CARTER</td>
<td>pop, r&amp;b</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Genesis.</td>
<td>RAYE</td>
<td>Genesis.</td>
<td>uk contemporary r&amp;b, uk pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>HISS</td>
<td>Megan Thee Stallion</td>
<td>HISS</td>
<td>houston rap, pop, rap, trap queen</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>Von dutch</td>
<td>Charli xcx</td>
<td>BRAT</td>
<td>art pop, candy pop, metropopolis, pop, uk pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>I Had Some Help (Feat. Morgan Wallen)</td>
<td>Post Malone</td>
<td>F-1 Trillion</td>
<td>dfw rap, melodic rap, pop, rap</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>Modern Woman</td>
<td>Eliza McLamb</td>
<td>Going Through It</td>
<td>gen z singer-songwriter</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">37</td>
<td>obsessed</td>
<td>Olivia Rodrigo</td>
<td>GUTS (spilled)</td>
<td>pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">39</td>
<td>Enough (Miami)</td>
<td>Cardi B</td>
<td>Enough (Miami)</td>
<td>pop, rap</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">44</td>
<td>Saturn</td>
<td>SZA</td>
<td>Saturn</td>
<td>pop, r&amp;b, rap</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50</td>
<td>Active</td>
<td>Asake</td>
<td>Active</td>
<td>afrobeats, nigerian pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">57</td>
<td>Like I Say (I runaway)</td>
<td>Nilüfer Yanya</td>
<td>My Method Actor</td>
<td>art pop, experimental pop, uk alternative pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">58</td>
<td>I Love You, I'm Sorry</td>
<td>Gracie Abrams</td>
<td>The Secret of Us</td>
<td>alt z</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">61</td>
<td>Family Matters</td>
<td>Drake</td>
<td>Family Matters</td>
<td>canadian hip hop, canadian pop, hip hop, pop r...</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">68</td>
<td>JOYRIDE</td>
<td>Kesha</td>
<td>JOYRIDE</td>
<td>dance pop, pop</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75</td>
<td>Piece of My Heart (feat. Brent Faiyaz)</td>
<td>Wizkid</td>
<td>Piece of My Heart (feat. Brent Faiyaz)</td>
<td>afrobeats, afropop, azonto, nigerian hip hop, ...</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">89</td>
<td>After Hours</td>
<td>Kehlani</td>
<td>CRASH</td>
<td>pop, r&amp;b, rap</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 1:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Too Sweet</td>
<td>Hozier</td>
<td>Unreal Unearth: Unaired</td>
<td>irish singer-songwriter, modern rock, pop, pov...</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>Gata Only</td>
<td>FloyyMenor</td>
<td>Gata Only</td>
<td>reggaeton chileno</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">40</td>
<td>Si Antes Te Hubiera Conocido</td>
<td>KAROL G</td>
<td>Si Antes Te Hubiera Conocido</td>
<td>reggaeton, reggaeton colombiano, urbano latino</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">46</td>
<td>BYE BYE</td>
<td>Kim Gordon</td>
<td>The Collective</td>
<td>no wave, noise rock</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>Cómo Dónde y Cuándo</td>
<td>Shakira</td>
<td>Las Mujeres Ya No Lloran</td>
<td>colombian pop, dance pop, latin pop, pop</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">62</td>
<td>The Lighthouse</td>
<td>Stevie Nicks</td>
<td>The Lighthouse</td>
<td>heartland rock</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">70</td>
<td>Wanting and Waiting</td>
<td>The Black Crowes</td>
<td>Happiness Bastards</td>
<td>album rock, blues rock, classic rock, electric...</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">92</td>
<td>ADIVINO</td>
<td>Myke Towers</td>
<td>ADIVINO</td>
<td>reggaeton, trap latino, urbano latino</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 2:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>we can't be friends (wait for your love)</td>
<td>Ariana Grande</td>
<td>eternal sunshine</td>
<td>pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>Taste</td>
<td>Sabrina Carpenter</td>
<td>Short n' Sweet</td>
<td>pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>APT.</td>
<td>ROSÉ</td>
<td>APT.</td>
<td>k-pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>Diet Pepsi</td>
<td>Addison Rae</td>
<td>Diet Pepsi</td>
<td>social media pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>The Prophecy</td>
<td>Taylor Swift</td>
<td>THE TORTURED POETS DEPARTMENT: THE ANTHOLOGY</td>
<td>pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">34</td>
<td>How Sweet</td>
<td>NewJeans</td>
<td>How Sweet</td>
<td>k-pop, k-pop girl group</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">38</td>
<td>Igual Que Un Ángel (with Peso Pluma)</td>
<td>Kali Uchis</td>
<td>ORQUÍDEAS</td>
<td>colombian pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">43</td>
<td>Anything</td>
<td>Griff</td>
<td>Vertigo</td>
<td>alt z, uk pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">59</td>
<td>215634</td>
<td>Elvie Shane</td>
<td>Damascus</td>
<td>modern country pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">66</td>
<td>New Woman (feat. ROSALÍA)</td>
<td>LISA</td>
<td>New Woman (feat. ROSALÍA)</td>
<td>k-pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">73</td>
<td>Training Season</td>
<td>Dua Lipa</td>
<td>Radical Optimism</td>
<td>dance pop, pop, uk pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">80</td>
<td>Use Me</td>
<td>Zach Top</td>
<td>Cold Beer &amp; Country Music</td>
<td>modern country pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">85</td>
<td>That's My Floor</td>
<td>Magdalena Bay</td>
<td>Imaginal Disk</td>
<td>la pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">86</td>
<td>In Front of Me Now</td>
<td>Nada Surf</td>
<td>Moon Mirror</td>
<td>power pop</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">90</td>
<td>XO (Only If You Say Yes)</td>
<td>ENHYPEN</td>
<td>ROMANCE : UNTOLD</td>
<td>anime, k-pop boy group</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">93</td>
<td>Beautiful Things</td>
<td>Benson Boone</td>
<td>Fireworks &amp; Rollerblades</td>
<td>singer-songwriter pop</td>
<td>0</td>
<td>2</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 3:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Nasty</td>
<td>Tinashe</td>
<td>Nasty</td>
<td>alternative r&amp;b, dance pop, metropopolis, pop,...</td>
<td>1</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">45</td>
<td>TRYIN' MY HARDEST</td>
<td>SiR</td>
<td>HEAVY</td>
<td>alternative r&amp;b, la pop</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">60</td>
<td>Love Me JeJe</td>
<td>Tems</td>
<td>Born in the Wild</td>
<td>afro r&amp;b, afrobeats, alte, nigerian pop</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">65</td>
<td>DENIAL IS A RIVER</td>
<td>Doechii</td>
<td>Alligator Bites Never Heal</td>
<td>alternative r&amp;b</td>
<td>0</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">69</td>
<td>Lagos Love Story</td>
<td>Ayra Starr</td>
<td>The Year I Turned 21</td>
<td>afrobeats</td>
<td>0</td>
<td>3</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 4:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>BIRDS OF A FEATHER</td>
<td>Billie Eilish</td>
<td>HIT ME HARD AND SOFT</td>
<td>art pop, pop</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>Girl, so confusing featuring lorde</td>
<td>Charli xcx</td>
<td>Brat and it’s completely different but also st...</td>
<td>art pop, candy pop, metropopolis, pop, uk pop</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Disease</td>
<td>Lady Gaga</td>
<td>Disease</td>
<td>art pop, dance pop, pop</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>Always and Forever (feat. Hannah Diamond)</td>
<td>SOPHIE</td>
<td>SOPHIE</td>
<td>art pop, bubblegum bass, deconstructed club, e...</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>Fisherrr - Remix</td>
<td>Cash Cobain</td>
<td>Fisherrr (Remix)</td>
<td>jersey club</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">42</td>
<td>Driver</td>
<td>Soccer Mommy</td>
<td>Evergreen</td>
<td>art pop, bubblegrunge, indie pop, indie rock, ...</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">47</td>
<td>In The Wawa (Convinced I Am God)</td>
<td>Lip Critic</td>
<td>Hex Dealer</td>
<td>digital hardcore</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">53</td>
<td>World on a String</td>
<td>Jessica Pratt</td>
<td>Here in the Pitch</td>
<td>ambient folk, art pop, freak folk</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">55</td>
<td>Starburster</td>
<td>Fontaines D.C.</td>
<td>Romance</td>
<td>crank wave, irish indie rock, irish post-punk</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">78</td>
<td>Ajhussi</td>
<td>Flying Lotus</td>
<td>Spirit Box</td>
<td>afrofuturism, alternative hip hop, electronica...</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">88</td>
<td>On The Game</td>
<td>The Black Keys</td>
<td>Ohio Players</td>
<td>alternative rock, blues rock, garage rock, ind...</td>
<td>0</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">91</td>
<td>Britpop</td>
<td>A. G. Cook</td>
<td>Britpop</td>
<td>bubblegum bass, escape room, hyperpop, proto-h...</td>
<td>0</td>
<td>4</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 5:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Good Luck, Babe!</td>
<td>Chappell Roan</td>
<td>Good Luck, Babe!</td>
<td>indie pop</td>
<td>1</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Right Back to It</td>
<td>Waxahatchee</td>
<td>Tigers Blood</td>
<td>alabama indie, bubblegrunge, chamber pop, coun...</td>
<td>1</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>Docket (feat. Bully)</td>
<td>Blondshell</td>
<td>Docket (feat. Bully)</td>
<td>bubblegrunge, indie pop</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Juna</td>
<td>Clairo</td>
<td>Charm</td>
<td>bedroom pop, indie pop, pov: indie</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>She's Leaving You</td>
<td>MJ Lenderman</td>
<td>Manning Fireworks</td>
<td>asheville indie, countrygaze, slacker rock</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">52</td>
<td>Never Need Me</td>
<td>Rachel Chinouriri</td>
<td>What A Devastating Turn of Events</td>
<td>indie pop, uk pop</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">63</td>
<td>Soup</td>
<td>Remi Wolf</td>
<td>Big Ideas</td>
<td>indie pop, modern alternative pop</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">67</td>
<td>Beaches</td>
<td>beabadoobee</td>
<td>This Is How Tomorrow Moves</td>
<td>bedroom pop, bubblegrunge, indie pop, pov: indie</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">76</td>
<td>Can't Be Still</td>
<td>illuminati hotties</td>
<td>POWER</td>
<td>bubblegrunge</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">79</td>
<td>California Highway 99</td>
<td>The Softies</td>
<td>The Bed I Made</td>
<td>sacramento indie, tape club, twee pop</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">82</td>
<td>Milk</td>
<td>Abby Sage</td>
<td>The Rot</td>
<td>modern indie pop</td>
<td>0</td>
<td>5</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 6:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>Angel Of My Dreams</td>
<td>JADE</td>
<td>Angel Of My Dreams</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>Company Culture</td>
<td>Lambrini Girls</td>
<td>Company Culture</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">41</td>
<td>Bon Bon</td>
<td>Fcukers</td>
<td>Bon Bon</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">48</td>
<td>Perfume</td>
<td>The Dare</td>
<td>What's Wrong With New York?</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">56</td>
<td>Get In With Me</td>
<td>BossMan Dlow</td>
<td>Mr Beat The Road</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">74</td>
<td>Midas</td>
<td>Wunderhorse</td>
<td>Midas</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">81</td>
<td>Masquerade</td>
<td>Original Cast of Stereophonic</td>
<td>Stereophonic (Original Cast Recording)</td>
<td>None Listed</td>
<td>0</td>
<td>6</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 7:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Not Like Us</td>
<td>Kendrick Lamar</td>
<td>Not Like Us</td>
<td>conscious hip hop, hip hop, rap, west coast rap</td>
<td>1</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Type Shit</td>
<td>Future</td>
<td>WE DON'T TRUST YOU</td>
<td>atl hip hop, hip hop, rap, southern hip hop, trap</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>euphoria</td>
<td>Kendrick Lamar</td>
<td>euphoria</td>
<td>conscious hip hop, hip hop, rap, west coast rap</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>Tough</td>
<td>Quavo</td>
<td>Tough</td>
<td>atl hip hop, melodic rap, rap, trap</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>TGIF</td>
<td>GloRilla</td>
<td>GLORIOUS</td>
<td>southern hip hop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">35</td>
<td>Never Lose Me (feat. SZA &amp; Cardi B)</td>
<td>Flo Milli</td>
<td>Fine Ho, Stay</td>
<td>viral rap</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>Get It Sexyy</td>
<td>Sexyy Red</td>
<td>In Sexyy We Trust</td>
<td>trap queen</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">64</td>
<td>Fine Art</td>
<td>KNEECAP</td>
<td>Fine Art</td>
<td>irish hip hop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">72</td>
<td>No One Else (feat. Jeremih)</td>
<td>Lola Brooke</td>
<td>No One Else (feat. Jeremih)</td>
<td>trap queen</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">84</td>
<td>KEHLANI (REMIX) [feat. Kehlani]</td>
<td>Jordan Adetunji</td>
<td>KEHLANI (REMIX) [feat. Kehlani]</td>
<td>irish hip hop</td>
<td>0</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">87</td>
<td>Big Dawgs</td>
<td>Hanumankind</td>
<td>Big Dawgs</td>
<td>desi hip hop, indian underground rap, malayala...</td>
<td>0</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cluster 8:</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Track Name</th>
<th data-quarto-table-cell-role="th">Artists</th>
<th data-quarto-table-cell-role="th">Album</th>
<th data-quarto-table-cell-role="th">Genres</th>
<th data-quarto-table-cell-role="th">Top 10 Song</th>
<th data-quarto-table-cell-role="th">agg_Cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>Pink Skies</td>
<td>Zach Bryan</td>
<td>Pink Skies</td>
<td>classic oklahoma country</td>
<td>1</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">36</td>
<td>Darkest Hour (Helene Edit)</td>
<td>Eric Church</td>
<td>Darkest Hour (Helene Edit)</td>
<td>contemporary country, country, country road</td>
<td>0</td>
<td>8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">51</td>
<td>Cardinal</td>
<td>Kacey Musgraves</td>
<td>Deeper Well</td>
<td>classic texas country, contemporary country, c...</td>
<td>0</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">71</td>
<td>Carousel Horses</td>
<td>Christian Lee Hutson</td>
<td>Paradise Pop. 10</td>
<td>countrygaze, deep new americana</td>
<td>0</td>
<td>8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">77</td>
<td>Radio Wave</td>
<td>Silverada</td>
<td>Silverada</td>
<td>classic texas country, red dirt, roots americana</td>
<td>0</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">83</td>
<td>Dammit Randy</td>
<td>Miranda Lambert</td>
<td>Dammit Randy</td>
<td>contemporary country, country, country dawn, c...</td>
<td>0</td>
<td>8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Again, this clustering method put a lot of weight on the genre of the songs. The top 10 songs are not clustered together. I think these playlists are also very strong and represent good groupings of songs.</p>
</section>
<section id="results" class="level4">
<h4 class="anchored" data-anchor-id="results">Results</h4>
<p>I looked at the results of clustering through the t-sne and pca graphs. Kmeans struggled the most with clustering, with clusters that blended together and were spread out. However. this ended up with pretty good, much longer playlists. DBSCAN did a much better job with producing tight clusters, but the algorithm ended up identifying 23/94 songs as “noise” and didn’t assign them a cluster. This resulted in short playlists. Agglomerative did the best overall with clear, non-overlapping clusters. The playlists were good, but a major focus was placed on genre.</p>
<p>None of the clustering methods were able to group top 10 songs or any ranking group songs together. This suggests that top 10 songs don’t have a huge shared set of characteristics and more features need to be added int to this model in order to get more promising results. The emphasis on genre when making these clusters makes sense and mighta also indicate that songs within a genre share characteristics like song length, explicitness, and sentiment to a concerningly high degree.</p>
</section>
</section>
</section>
<section id="summary-and-interpretation-of-results" class="level2">
<h2 class="anchored" data-anchor-id="summary-and-interpretation-of-results">Summary and Interpretation of Results</h2>
<p>This page ran dimensionality reduction and clustering on the music data. PCA and T-SNE allowed me to visualize this very high-dimensional data and pulled out clusters that I didn’t see before.</p>
<p>Clustering had some interesting results, with the 9 clusters created by hierarchical clustering yielding the best results both visually and through the created playlists.</p>
<p>None of these clustering methods grouped the top 10 songs together. This suggests that their success may depend on factors outside of what we considered in this dataset. However, all clustering methods seemed to place a lot of importance on the genre of the song, indicating that songs within the same genre tend to have very strongly measurable similarities. I’m curious to know if this has been a trend over time, where genres have grown into these unique identities or if music has always been this easily groupable.</p>
<p>Some practical applications of these clusters could be interesting. The clusters could be used as I did to curate playlists that follow specific themes or trends. It could also be used to uplift other, non top-10 songs. Since the top-10 songs were dispersed throughout clusters, perhaps the songs in their individual clusters could be recommended to listeners who enjoyed that particular top-10 song. This would help expose consumers to new music and give different artists a chance at success.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>